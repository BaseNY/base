<!--TO DO : WRITE A FUNCTION TO MAKE THE OFFERS/MSGS ON THE PAGEITEMINBOX SHOW IN ORDER-->
<template name="pageItemInbox">
	<section class="pageItemInbox">
		<h1>Offers for {{user}}</h1>
		<div class="product-body">
			{{#each items}}
				{{#unless sold}}
					{{> itemsRow}}
				{{/unless}}
			{{/each}}
		</div>
		<h1>Buying offers</h1>
		<div class="buying-offers-container">
			{{#each buying}}
				{{#unless sold}}
					{{> itemsRowBuying}}
				{{/unless}}
			{{/each}}
		</div>
	</section>
</template>

<template name="itemsRow">
	<div class="row">
		<div class="row-left">
			<a class="row-thumbnail" href="/post/{{_id}}">
				Selling: {{title}}
				<br><br>
				<img class="product-img" src="{{imageUrl}}" />
			</a>
			<div id="mark-sold">Mark as sold</div>
		</div>
		<div class="row-right">
			{{#each offers}}
				<a class="row-details" href="/inbox/{{_id}}">{{buyer}}</a>
			{{/each}}
		</div>
	</div>
</template>

<template name="itemsRowBuying">
	<div class="row">
		<div class="row-left">
			{{#with item}}
				<a class="row-thumbnail" href="/post/{{_id}}">
					Buying: {{title}}
					<br><br>
					<img class="product-img" src="{{imageUrl}}" />
				</a>
			{{/with}}
		</div>
		<div class="row-right">
			<a class="row-details" href="/inbox/{{_id}}">{{seller}}</a>
		</div>
	</div>
</template>

<!--<template name="pageOffers">
	<h1>Offers for {{item.title}}</h1>
	<ul>
		{{#each offers}}
		<li>
			<b>{{buyer}}</b>
			<a href="/inbox/{{this.postId}}/{{_id}}">See convo</a>
		</li>
		{{/each}}
	</ul>
</template>-->

<template name="offersSidebar">
	<div class="left-sidebar">
		<a class="row-details" href="/inbox">All offers</a>
		{{#each offers}}
			<a class="row-details" href="/inbox/{{_id}}">{{buyer}}</a>
		{{/each}}
	</div>
</template>

<!--maybe i want to handle this as a pseduo-modal instead-->
<template name="pageNego">
	<div class="pageNego">
		<h1>{{item.title}}</h1>
		<!--<h2>{{offer.offer}}</h2>-->
		{{> offersSidebar}}
		<div class="conversation">
			<div id="messages-container">
				{{#each messages}}
					{{> message}}
				{{/each}}
			</div>
			<div class="reply-box">
				<textarea id="message" placeholder="Message..."></textarea>
			</div>
		</div>
	</div>
</template>

<template name="message">
	<div class="message">
		<!--
		<div class="message-thumbnail">
			Img doesn't load bc of async callback
			<img src="{{img}}" />
		</div>-->
		<div class="message-text">
			<b>{{poster}}:</b>
			{{text}}
		</div>
	</div>
</template>
